textFieldIP = document.getElementById("ip-address");
connectButton = document.getElementById("connect");

function validateIPAddress(IP) {
    const PatternIP = /^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;

    if (IP.length == 0 || IP.length > 15)
        return false;

    return PatternIP.test(IP);
}

// Establish wireless connection over WiFi
connectButton.addEventListener("click", () => {
    if (!validateIPAddress(textFieldIP.value)) {
        alert("Invalid IP address");
        return;
    };

    fetch(`http://${textFieldIP.value}/`)
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => {
            alert("Unable to connect to the device!")
        });
})

// Plot heatmap
var data = [
    {
        z: [
            [6.46, 16.68, 19.70, 24.20, 18.29, 9.78, 15.20, 13.66, 11.77, 3.05, 16.66, 12.73, 20.56, 22.47, 0.59, 7.13, 2.83, 24.97, 7.96, 18.12, 2.02, 10.09, 16.12, 24.37, 13.07, 2.80, 17.27, 21.58, 1.40, 3.94, 22.24, 19.96],
            [10.78, 21.65, 0.87, 20.49, 6.15, 21.28, 14.09, 23.50, 1.91, 20.77, 11.58, 15.89, 7.21, 23.34, 0.01, 5.50, 23.05, 23.03, 12.22, 2.34, 12.47, 23.16, 3.34, 22.36, 7.75, 19.94, 23.83, 6.97, 15.78, 21.44, 4.60, 20.79],
            [3.26, 16.01, 3.17, 9.90, 14.68, 13.01, 9.41, 11.04, 17.42, 10.39, 9.87, 14.55, 3.73, 21.41, 17.56, 24.22, 10.59, 15.18, 0.71, 20.60, 8.65, 15.44, 16.93, 8.57, 12.78, 20.16, 23.99, 17.31, 23.74, 16.19, 23.86, 20.86],
            [22.39, 23.48, 19.51, 21.18, 22.61, 21.93, 6.03, 17.80, 3.30, 21.02, 19.19, 10.40, 23.93, 15.17, 10.45, 18.34, 24.96, 23.75, 3.03, 14.87, 3.05, 9.92, 21.58, 22.61, 11.39, 7.71, 1.60, 7.31, 9.05, 2.38, 0.71, 22.13],
            [9.16, 10.88, 7.01, 16.98, 6.12, 3.20, 22.62, 8.11, 18.75, 16.22, 12.24, 8.90, 22.32, 18.92, 22.11, 11.02, 9.81, 1.78, 9.63, 23.36, 5.52, 14.98, 0.89, 0.30, 5.33, 2.80, 13.89, 8.86, 10.49, 10.78, 15.25, 7.83],
            [6.46, 16.68, 19.70, 24.20, 18.29, 9.78, 15.20, 13.66, 11.77, 3.05, 16.66, 12.73, 20.56, 22.47, 0.59, 7.13, 2.83, 24.97, 7.96, 18.12, 2.02, 10.09, 16.12, 24.37, 13.07, 2.80, 17.27, 21.58, 1.40, 3.94, 22.24, 19.96],
            [10.78, 21.65, 0.87, 20.49, 6.15, 21.28, 14.09, 23.50, 1.91, 20.77, 11.58, 15.89, 7.21, 23.34, 0.01, 5.50, 23.05, 23.03, 12.22, 2.34, 12.47, 23.16, 3.34, 22.36, 7.75, 19.94, 23.83, 6.97, 15.78, 21.44, 4.60, 20.79],
            [3.26, 16.01, 3.17, 9.90, 14.68, 13.01, 9.41, 11.04, 17.42, 10.39, 9.87, 14.55, 3.73, 21.41, 17.56, 24.22, 10.59, 15.18, 0.71, 20.60, 8.65, 15.44, 16.93, 8.57, 12.78, 20.16, 23.99, 17.31, 23.74, 16.19, 23.86, 20.86],
            [22.39, 23.48, 19.51, 21.18, 22.61, 21.93, 6.03, 17.80, 3.30, 21.02, 19.19, 10.40, 23.93, 15.17, 10.45, 18.34, 24.96, 23.75, 3.03, 14.87, 3.05, 9.92, 21.58, 22.61, 11.39, 7.71, 1.60, 7.31, 9.05, 2.38, 0.71, 22.13],
            [9.16, 10.88, 7.01, 16.98, 6.12, 3.20, 22.62, 8.11, 18.75, 16.22, 12.24, 8.90, 22.32, 18.92, 22.11, 11.02, 9.81, 1.78, 9.63, 23.36, 5.52, 14.98, 0.89, 0.30, 5.33, 2.80, 13.89, 8.86, 10.49, 10.78, 15.25, 7.83],
            [6.46, 16.68, 19.70, 24.20, 18.29, 9.78, 15.20, 13.66, 11.77, 3.05, 16.66, 12.73, 20.56, 22.47, 0.59, 7.13, 2.83, 24.97, 7.96, 18.12, 2.02, 10.09, 16.12, 24.37, 13.07, 2.80, 17.27, 21.58, 1.40, 3.94, 22.24, 19.96],
            [10.78, 21.65, 0.87, 20.49, 6.15, 21.28, 14.09, 23.50, 1.91, 20.77, 11.58, 15.89, 7.21, 23.34, 0.01, 5.50, 23.05, 23.03, 12.22, 2.34, 12.47, 23.16, 3.34, 22.36, 7.75, 19.94, 23.83, 6.97, 15.78, 21.44, 4.60, 20.79],
            [3.26, 16.01, 3.17, 9.90, 14.68, 13.01, 9.41, 11.04, 17.42, 10.39, 9.87, 14.55, 3.73, 21.41, 17.56, 24.22, 10.59, 15.18, 0.71, 20.60, 8.65, 15.44, 16.93, 8.57, 12.78, 20.16, 23.99, 17.31, 23.74, 16.19, 23.86, 20.86],
            [22.39, 23.48, 19.51, 21.18, 22.61, 21.93, 6.03, 17.80, 3.30, 21.02, 19.19, 10.40, 23.93, 15.17, 10.45, 18.34, 24.96, 23.75, 3.03, 14.87, 3.05, 9.92, 21.58, 22.61, 11.39, 7.71, 1.60, 7.31, 9.05, 2.38, 0.71, 22.13],
            [9.16, 10.88, 7.01, 16.98, 6.12, 3.20, 22.62, 8.11, 18.75, 16.22, 12.24, 8.90, 22.32, 18.92, 22.11, 11.02, 9.81, 1.78, 9.63, 23.36, 5.52, 14.98, 0.89, 0.30, 5.33, 2.80, 13.89, 8.86, 10.49, 10.78, 15.25, 7.83],
            [6.46, 16.68, 19.70, 24.20, 18.29, 9.78, 15.20, 13.66, 11.77, 3.05, 16.66, 12.73, 20.56, 22.47, 0.59, 7.13, 2.83, 24.97, 7.96, 18.12, 2.02, 10.09, 16.12, 24.37, 13.07, 2.80, 17.27, 21.58, 1.40, 3.94, 22.24, 19.96],
            [10.78, 21.65, 0.87, 20.49, 6.15, 21.28, 14.09, 23.50, 1.91, 20.77, 11.58, 15.89, 7.21, 23.34, 0.01, 5.50, 23.05, 23.03, 12.22, 2.34, 12.47, 23.16, 3.34, 22.36, 7.75, 19.94, 23.83, 6.97, 15.78, 21.44, 4.60, 20.79],
            [9.46, 14.53, 16.91, 23.26, 8.13, 18.21, 18.98, 18.05, 3.31, 24.72, 19.58, 4.97, 23.66, 1.98, 9.58, 20.48, 3.32, 16.44, 6.34, 24.80, 20.43, 21.27, 7.20, 11.07, 18.57, 11.43, 7.27, 6.80, 20.01, 12.51, 11.94, 6.90],
            [22.39, 23.48, 19.51, 21.18, 22.61, 21.93, 6.03, 17.80, 3.30, 21.02, 19.19, 10.40, 23.93, 15.17, 10.45, 18.34, 24.96, 23.75, 3.03, 14.87, 3.05, 9.92, 21.58, 22.61, 11.39, 7.71, 1.60, 7.31, 9.05, 2.38, 0.71, 22.13],
            [9.16, 10.88, 7.01, 16.98, 6.12, 3.20, 22.62, 8.11, 18.75, 16.22, 12.24, 8.90, 22.32, 18.92, 22.11, 11.02, 9.81, 1.78, 9.63, 23.36, 5.52, 14.98, 0.89, 0.30, 5.33, 2.80, 13.89, 8.86, 10.49, 10.78, 15.25, 7.83],
            [6.46, 16.68, 19.70, 24.20, 18.29, 9.78, 15.20, 13.66, 11.77, 3.05, 16.66, 12.73, 20.56, 22.47, 0.59, 7.13, 2.83, 24.97, 7.96, 18.12, 2.02, 10.09, 16.12, 24.37, 13.07, 2.80, 17.27, 21.58, 1.40, 3.94, 22.24, 19.96],
            [20.04, 13.35, 2.62, 22.03, 4.31, 19.28, 14.96, 3.67, 18.54, 18.64, 23.18, 11.84, 3.73, 24.26, 8.40, 15.96, 8.81, 5.43, 20.62, 8.95, 16.55, 6.63, 12.91, 5.03, 20.68, 8.50, 18.90, 6.59, 2.32, 2.18, 9.73, 12.98],
            [3.26, 16.01, 3.17, 9.90, 14.68, 13.01, 9.41, 11.04, 17.42, 10.39, 9.87, 14.55, 3.73, 21.41, 17.56, 24.22, 10.59, 15.18, 0.71, 20.60, 8.65, 15.44, 16.93, 8.57, 12.78, 20.16, 23.99, 17.31, 23.74, 16.19, 23.86, 20.86],
            [22.39, 23.48, 19.51, 21.18, 22.61, 21.93, 6.03, 17.80, 3.30, 21.02, 19.19, 10.40, 23.93, 15.17, 10.45, 18.34, 24.96, 23.75, 3.03, 14.87, 3.05, 9.92, 21.58, 22.61, 11.39, 7.71, 1.60, 7.31, 9.05, 2.38, 0.71, 22.13]
        ],
        type: 'heatmap'
    }
];

let layout = {
    title: 'Heat map',
    font: { size: 18 }
};

Plotly.newPlot('heatmap', data, layout = layout, config = { responsive: true });